Эпоха символьных шрифтов
============================================================

Увеличение производительности сайтов это постоянный процесс. Сперва мы
отказались от таблиц, прозрачных однопиксельных gif файлов и предпочли вместо
устаревших тегов типа `<font>` использовать CSS, тем самым уменьшая размер
страницы и разделяя содержимое от его представления. После этого мы озаботились
DNS запросами, кэшированием и количеством файлов и начали использовать CSS
спрайты, собирая кучу маленьких картинок из HTML в одно фоновое изображение.

Отныне мы вступаем в третью эпоху оптимизации, и это символьные шрифты.

Символьные шрифты позволяют объединять все эти крохотные и не очень иконки в
один файл, но не спрайт. Этот способ обладает (как и спрайты) не только плюсами
кэширования и небольшого размера файла, но и дополнительными преимуществами,
необходимость в которых начинает чётко осознаваться с всё бо́льшим
распространением экранов высокой плотности пикселей. Сегодня я хочу рассказать
про некоторые преимущества и проблемы с которыми вы столкнётесь, когда начнёте
использовать символьные шрифты.


## Довольный пользователь ##

В то время как, появилось бесчисленное множество шрифтов, созданных для
использования как иконки, и их детализируемость росла, многие высоконагруженные
сайты заменили все свои картинки одним единственным шрифтом. Самым известным
примером может служить Гитхаб, одновременно улучшивший скорость и впечатления
пользователя, решительно отказавшись от всех иконок, и выбрав [Octicons][1] —
единственный файл правильно настроенного шрифта.

Растровые картинки из-за своей пиксельной природы проигрывают символьным
шрифтам. Это важно, потому что растровые изображения предназначаются для работы
в заранее определённом разрешении, поэтому при повышенной плотности пикселей,
например, как на современных ретиноподобных экранах, картинки должны быть
растянуты, чтобы выглядеть такими же по размеру. Часто это приводит к ещё более
пиксельным картинкам. У векторной графики никогда не было подобных проблем,
позволяя ей без проблем масштабироваться под любые разрешения.

Использование векторной графики имело свои ограничения в прошлом. Можно было
использовать PDF и SVG, но это было сопряжено с проблемами совместимости.
Символьные шрифты имеют векторные корни и все браузеры (даже IE6) имеют
возможность подключать шрифты в HTML страницу. Совпадение появления таких
шрифтов с поддержкой со стороны браузеров и с распространением экранов
повышенной четкости, предоставляет возможность увеличивать производительность и
улучшать пользовательский опыт.


## Доступность ##

Когда дело, доходит до доступности, символьные шрифты оказываются в сложной
ситуации, так как работают также плохо, как и картинки, но всё же довольно
хорошо как текст.

Множество ранних шрифтов предоставляли карту символов, в которой векторная
графика привязывалась к букве в пределах ASCII таблицы. Печатав *w*, вы получали
иконку глобуса, *m* — иконку почтового конверта. Это обеспечивало легко
воспринимаемый механизм превращения символа в иконку. Проблемы возникают если
шрифт по какой-то причине не загрузился, что приводит к странным и бессмысленным
буквам в случайных местах на странице. Например, если предполагается показать
стрелочку по соседству со словом «следующая», то ваша разметке выглядит примерно
так:

    <div><span class="icon">L</span> Следующая</div>

Но если только не загрузился CSS, JavaScript или шрифт, то вместо стрелочки вы
увидите букву L. Вы можете использовать все запасные решения: вставлять код с
помощью JavaScript или использовать псевдо-элементы `:before` и `:after`, но по
окончании рабочего дня вы всё ещё можете заметить, что поисковый робот
проиндексировал текст как «L Следующая».

Существует лучший путь.

Тем временем, изучая все эти проблемы, мы решили данную с помощью области
[пользовательских символов][1] в Юникоде. Символы в этой области не связаны
смыслом ни c одной из букв в алфавите. Если шрифт не доступен или не загрузился,
то вы увидите пустое место вместо бессмысленной буквы.

Но стойте, — мы можем улучшить это ещё больше!

В шрифтах также существуют лигатуры — малозаметные изменения в формах букв для
более незаметного чтения. Возьмём к примеру двойную букву f. Хороший шрифт
превратит ff в единственный знак, в котором одна буква незаметно пересекается с
другой. Существует несколько стандартных лигатур: ff, fl и fi. При этом нет
никаких причин, по которым вы не можете создать свою собственную лигатуру.

В файле шрифта это простая замена; все лигатуры ищут соответствующие им
последовательность символов. Когда встречается эта последовательность, она
заменяется глифом лигатуры. Это означает, что у вас может быть строка A List
Apart и она превратится в иконку логотипа.

Браузеры  не поддерживающие подключение сторонних шрифтов, и поисковые пауки
проиндексируют сырой текст без лигатур, но все остальные с поддержкой
возможности рендеринга подключаемых шрифтов и лигатур получат приятную векторную
иконку. Это лучшее из двух миров, созданное на куда более высоком уровне чем
HTML и CSS.

Сразу после того, как вы поняли как работают лигатуры, перед вами открывается
новый мир полный возможностей! Все те иконки, используемые в навигации, могут
быть как и символами, так и лигатурами в шрифте. Итак ваша разметка выглядит
примерно так:

    <ul>
        <li>Home</li>
        <li>Contact</li>
        <li>About</li>
        <li>Cart</li>
    </ul>

Но в результат с включенными лигатурами будет таким:  

![][100]

Проект [Symbolset][3] экспериментирует с лигатурами и символьными шрифтами уже
какое-то время, а теперь ещё и продаёт архивы шрифтов с распространёнными
иконками. Symbolset также имеет превосходную поддержку лигатур, и прямо на
главной странице вы можете печатать слова и видеть как они мгновенно
превращаются в символы. Не удивляйтесь, если в голове появятся новые идеи.

Использование лигатур как замены для символов имеет практическое применение. К
примеру сайт BBC ранее использовал [часы][4] в углу главной страницы. Для часов
мог быть использован Flash, но против этого злополучного выбора выступает его
слабая доступность и наличие альтернатив. С другой стороны мог быть использован
CSS для поворачивания картинок с помощью небольшого JavaScript таймера. Вместо
этого BBC выбрали HTML5, используя Canvas плюс JavaScript для бесконечного
обновления стрелок часов.

Но все эти нефлэшевые решения используют растровые изображения, которые выглядят
отнюдь не хорошо на экранах высокого разрешения. Существуют JavaScript
библиотеки, например Raphaeljs, которые умеют создавать SVG или VML объекты,
которые будут векторными и приятно выглядящими, но из-за того, что эти объекты
загружаются и создаются c помощью JavaScript они невидимы для поисковых пауков и
браузеров с выключенным JavaScript.

![][101]

Применение символьного шрифта подарит вам лучшее из обоих миров: доступность и
векторная графика. Напечатав 12:00 шрифт затребует лигатуру, которая
сконвертирует набор символов в иконку с обоими стрелками, указывающими ровно на
12. Строка 12:01 будет уже другой лигатурой соответствующего положения стрелок.
Хоть и придётся попотеть над созданием большого количества лигатур, в
результате, полученные вами часы будут прекрасными векторными иконками. На самом
деле, несколько «часовых» шрифтов уже делают подобную работу; на странице
[http://timepiece.inostudio.de][5] вы найдёте несколько примеров. При ближайшем
рассмотрении исходников страницы, вы увидите всю простоту этой реализации.

Только подумайте, что все маленькие детали на ваших страницах могут быть сведены
в один символьный шрифт. Будьте открыты к новым возможностям. Всё что угодно,
начиная с маркеров списка и стрелочек и до иконок RSS вместе с иконками
социальных сетей, могут быть объединены в один, маленький шрифтовой файл,
который может быть закэширован, с возможностью векторного масштабирования, без
необходимости иметь под рукой несколько картинок разных цветов.


## Создание собственного шрифта ##

Разработчики съели собаку на программах Photoshop, Fireworks и прочих. Для нас,
начинающих использовать спрайты не было больших изменений, потому что наши
инструменты не менялись. Для работы с символьным шрифтом в нашем рабочем
пространстве появляется ещё одна программа — редактор шрифтов. Это новый зверь
для нас, которого нам нужно будет изучить, и это не должно быть трудно.

Более того, множество инструментов было изобретено, чтобы помочь нам в создании
шрифтов. К примеру, [Icomoon][6] позволяет загружать ваши SVG файлы, и
привязывать их к Юникод символам, а после этого экспортирует шрифт для
использования в интернете.

Но что делать если мы хотим немного углубиться? Существует несколько
инструментов для создания шрифтов. Некоторые платные, профессиональные
приложения, но самый распространённый и бесплатный инструмент — это
[FontForge][7]. Он немного неуклюж и громоздок, но вы всегда сможете найти в
сети руководства по его использованию.


## Проблемы со шрифтами ##

Любой дизайнер может сказать вам, что иконка или логотип должны немного
отличаться при разных размерах, обычно это заключается в переменной толщине
линий или даже отсутствии каких-то деталей в маленьких размерах. Между тем,
символьные шрифты не дают вам этой возможности: вы не можете иметь несколько
иконок под разные разрешения. Ваш дизайн для 20 точек на дюйм должен быть таким
же и для 120 точек, и для 6 точек.

Если вы всё же хотите дизайн иконок отличающийся на разных размерах шрифта,
тогда необходимо продублировать иконку в файле шрифта и по необходимости
выбирать нужную. Это тоже проблематично, из-за того, что вы не можете знать
наверняка, каким именно способом конечный пользователь увидит ваш дизайн на
самом деле. Просто увеличивая размер шрифта, добавляя в него новые размеры для
существующих иконок вы не добьётесь того, что браузер сам будет переключаться
между иконками разных размеров. Для многих из нас это не проблема, так как наши
обычные иконки, которые мы используем каждый день для RSS и социальных сетей
неплохо масштабируются.

Другая главная особенность символьных шрифтов, это возможность использования
только одного цвета. Вы можете использовать немного магии, фоновые цвета или
даже градиенты для симуляции двухцветного логотипа, но если ваши иконки всех
цветов радуги, то вероятнее всего данный способ не для вас.

Для устранения этого недочёта Applе предложила полноцветные шрифты, которые
позволят вам создавать и подключать векторную графику в любую веб страницу.
Первый попыткой в этой сфере является шрифт [Emoji][7], который уже есть у вас,
если вы пользуетесь OSX Lion. Оборотной стороной введения нового формата для
шрифтов является недостаточная браузерная поддержка и то, что шрифтовым
программам придётся обновиться, что в свою очередь означает, что новый формат
шрифтов можно будет использовать в реальной жизни только по прошествии какого-то
времени.


## Добро пожаловать в следующую эпоху ##

Символьные шрифты — следующий шаг в дизайне сайтов и оптимизации их работы, и
вам необходимо понимать принцип их работы, чтобы продолжать свою работу в
индустрии. После определённой практики вы сможете создавать ваши собственные
шрифты с логотипами, иконками и брендинговыми деталями для подключения и работы
на ваших сайтах. Это будет работать не только на впечатления аудитории от вашего
сайта, но и на увеличение скорости его работы. Наступило время, когда все мы
начинаем использовать символьные шрифты — и вместе с тем, помогаем улучшать
инструменты, стандарты и техники их использования.



[0]: https://github.com/blog/1106-say-hello-to-octicons "Say Hello to Octicons"
[1]: http://en.wikipedia.org/wiki/Private_Use_(Unicode) "Private Use"
[2]: http://symbolset.com/ "Symbolset"
[3]: http://www.bbc.co.uk/blogs/webdeveloper/2010/04/good-news-the-clock-has.shtml "BBC Homepage: Clock"
[4]: http://timepiece.inostudio.de/ "Timepiece Rounded"
[5]: http://icomoon.io/ "IcoMoon"
[6]: http://fontforge.org/ "FontForge"
[7]: http://en.wikipedia.org/wiki/Apple_Color_Emoji "Apple Color Emoji"
[100]: ./img/glyphs.png "Глифы"
[101]: ./img/clock.png "Часы"